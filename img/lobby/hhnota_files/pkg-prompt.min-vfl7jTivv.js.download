define("modules/clean/admin/megaphone/prompt/api/utils",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){var t=function(e){return e.replace(/_(.)/g,function(e,t){return t.toUpperCase()})},n=function(e,t){if(null===t)return null;if(Array.isArray(t)){var o=[];return t.forEach(function(t){o.push(n(e,t))}),o}if("object"==typeof t){var a={};return Object.keys(t).forEach(function(o){a[e(o)]=n(e,t[o])}),a}return t},o=function(e,t){return n(e,t)};e.toCamelCase=function(e){return o(t,e)},e.jsonToCamelCase=function(t){var n=JSON.parse(t);return e.toCamelCase(n)},e.stringToCamelCase=function(e){return t(e)},e.toStoneBool=function(e){return{".tag":"bool",bool:e}},e.toStoneInt=function(e){return{".tag":"int",int:e}},e.toStoneString=function(e){return{".tag":"string",string:e}},e.toStoneStringList=function(e){return{".tag":"string_list",string_list:e}}})(t.APIUtils||(t.APIUtils={})),t.isVersion=function(e){return void 0!==e.id},t.isCreateVersionArg=function(e){return void 0===e.id},t.versionResultToUpdateVersionArg=function(e){return{id:e.id,content_dict:e.content_dict,description:e.description,name:e.name,stormcrow_variant:e.stormcrow_variant}},t.isAdActive=function(e){return!!e.ad&&!!e.ad.lifecycle_state&&"active"===e.ad.lifecycle_state[".tag"]},t.isCampaignArchived=function(e){return"archived"===e.lifecycle_state[".tag"]},t.isCampaignApproved=function(e){return"approved"===e.lifecycle_state[".tag"]},t.isVersionApproved=function(e){return"approved"===e.lifecycle_state[".tag"]},t.isVersionArchived=function(e){return"archived"===e.lifecycle_state[".tag"]},t.isVersionPending=function(e){return"pending_approval"===e.lifecycle_state[".tag"]},t.newIsVersionPending=function(e){var t=e.megaphone_version_metadata,n=t?t.approval_request:void 0;return"pending_approval"===e.lifecycle_state[".tag"]&&void 0!==n&&"pending_approval"===n.lifecycle_state[".tag"]},t.isVersionDraft=function(e){var t=e.megaphone_version_metadata,n=t?t.approval_request:void 0;return"pending_approval"===e.lifecycle_state[".tag"]&&(void 0===n||"draft"===n.lifecycle_state[".tag"])}}),define("modules/clean/react/prompt/header_bubble",["require","exports","tslib","react","external/classnames","modules/clean/react/css","modules/clean/react/prompt/prompt_location","modules/clean/react/prompt/header_link","modules/clean/react/prompt/image","modules/clean/react/prompt/button"],function(e,t,n,o,a,r,i,s,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),a=n.__importDefault(a);var c=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.state_manager.onShow()},t.prototype.render=function(){var e=this.props.campaign.content,t=o.default.createElement("div",null,o.default.createElement("p",{className:"message",dangerouslySetInnerHTML:d.sanitizeOptionalHTML(e.text),ref:this.state_manager.enhanceHTMLButtons}),o.default.createElement(d.PromptButtons,{campaign:this.props.campaign,confirmIsPost:this.state_manager.shouldConfirmUsingPost(),confirmUrl:this.state_manager.buildConfirmEndpointURI(),onConfirm:this.state_manager.onConfirm,onDismiss:this.state_manager.onDismiss})),n=a.default({"header-bubble-container":!0,show:!0,"header-bubble-container--with-image":!!e.imageUrl}),r=e.imageUrl?[o.default.createElement("div",{className:"left"},o.default.createElement(d.ConfirmButton,{className:"image-button",confirmInNewTab:e.confirmInNewTab,confirmUrl:this.state_manager.buildConfirmEndpointURI(),confirmIsPost:this.state_manager.shouldConfirmUsingPost(),onConfirm:this.state_manager.onConfirm},o.default.createElement(l.Image,{src:e.imageUrl,srcHiRes:e.imageUrlHiRes,alt:e.confirmText}))),o.default.createElement("div",{className:"right"},t)]:[t],i=["top-level-nav-item"];return this.state.isConfirmed||this.state.isDismissed||i.push("active"),o.default.createElement("li",{className:i.join(" ")},o.default.createElement(s.HeaderLinkRendererWithoutCSS,{content:e,confirmUrl:this.state_manager.buildConfirmEndpointURI(),onConfirm:this.state_manager.onConfirm}),o.default.createElement("div",{className:"sub-nav chat-bubble header-bubble upsell-bubble",id:"upsell-bubble"},o.default.createElement("div",{className:n},r,o.default.createElement("div",{className:"chat-bubble-arrow-border"}),o.default.createElement("div",{className:"chat-bubble-arrow"}))))},t.displayName="HeaderBubbleWithoutCSS",t})(i.PromptLocationWithDefaultState);t.HeaderBubbleWithoutCSS=c,t.HeaderBubble=r.requireCssWithComponent(c,["/static/css/upsell/prompt_pagelet-vfl_uoVlu.css"])}),define("modules/clean/react/prompt/header_link",["require","exports","tslib","react","modules/clean/react/css","modules/clean/react/prompt/prompt_location","modules/clean/react/sprite_div"],function(e,t,n,o,a,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),i=n.__importDefault(i);var s=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e=this.props.content,t=["confirm-button","header-nav-link","enabled"];e.linkPretext&&t.push("header-nav-link--bold");var n;n=e.linkIcon?o.default.createElement("a",{className:t.join(" "),href:this.props.confirmUrl,onClick:this.props.onConfirm},o.default.createElement(i.default,{group:"web",name:e.linkIcon,text:e.linkText})):o.default.createElement("a",{className:t.join(" "),href:this.props.confirmUrl,onClick:this.props.onConfirm},e.linkText);var a=n;return e.linkPretext&&(a=o.default.createElement("div",{className:"header-nav-link--space"},o.default.createElement("span",{className:"header-link__pretext"},e.linkPretext),n)),o.default.createElement("div",{className:"header-link"},a)},t.displayName="HeaderLinkRendererWithoutCSS",t})(o.default.Component);t.HeaderLinkRendererWithoutCSS=s;var l=a.requireCssWithComponent(s,["/static/css/upsell/prompt_pagelet-vfl_uoVlu.css"]),d=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.state_manager.onShow()},t.prototype.render=function(){return o.default.createElement("li",{className:"top-level-nav-item"},o.default.createElement(l,{content:this.props.campaign.content,confirmUrl:this.state_manager.buildConfirmEndpointURI(),onConfirm:this.state_manager.onConfirm}))},t})(r.PromptLocationWithDefaultState);t.HeaderLink=d}),define("modules/clean/react/prompt/home_modal",["require","exports","tslib","react","external/classnames","modules/core/i18n","modules/clean/react/css","modules/clean/react/prompt/prompt_location","modules/clean/react/prompt/image","modules/clean/react/modal","modules/clean/react/prompt/button","modules/clean/user_education/user_education_client","modules/clean/user_education/user_education_loader","modules/clean/upsell/prompt_event_logger","modules/clean/ux_analytics_utils"],function(e,t,n,o,a,r,i,s,l,d,c,u,m,p,f){"use strict";function g(e){u.UEClient.sendEvent("OnboardingPromptModal","Shown",{name:e})}function h(e){u.UEClient.sendEvent("OnboardingPromptModal","ConfirmButtonClicked",{name:e})}Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),a=n.__importDefault(a);var _=function(e){var t=o.default.createElement(d.Modal,{id:e.id,className:e.className,title:e.title,acceptButtonText:e.acceptButtonText,clickOutToClose:!1,showX:e.showX,shouldLoadCss:!1},e.children),n=t.type.prototype;return n.componentDidMount&&(n._componentDidMount=n.componentDidMount,delete n.componentDidMount),t},b=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onShow=function(){t.state_manager.onShow(),t.props.campaign.onboardingModuleName&&g(t.props.campaign.onboardingModuleName)},t.onConfirm=function(e){t.state_manager.onConfirm(e),t.props.campaign.content.confirmInNewTab?setTimeout(function(){t.close()},0):t.state_manager.shouldConfirmUsingPost()||(t.close(),t.props.campaign.onboardingModuleName&&(h(t.props.campaign.onboardingModuleName),t.state_manager.eventLogger.recordEvent("onboarding_confirmed"))),f.dispatchModalClosed()},t.onDismiss=function(e){t.state_manager.onDismiss(e),t.close()},t.onRemindMeLater=function(e){t.state_manager.onDismiss(e,{remindMeLater:!0}),t.close()},t.enhanceHTMLButtons=function(e){t.state_manager.enhanceHTMLButtons(e,{dismissButtonSelector:".dismiss-button, .db-modal-x, .db-modal-overlay",onConfirmOverride:t.onConfirm,onDismissOverride:t.onDismiss})},t}return n.__extends(t,e),t.prototype.componentWillMount=function(){this.props.campaign.onboardingModuleName?m.UELoader.notifyModuleToLoad(this.props.campaign.onboardingModuleName):m.UELoader.notifyModuleToLoad(null)},t.prototype.close=function(){d.Modal.close()},t.prototype.render=function(){var e,t=a.default((e={"dfb-modal":"dfb"===this.props.campaign.campaignTypeId,"pro-modal":"dfb"!==this.props.campaign.campaignTypeId},e["db-modal-custom-"+this.props.campaign.campaignName]=!!this.props.campaign.campaignName,e[this.props.campaign.content.modalStyle||""]=!!this.props.campaign.content.modalStyle,e["show-upsell-modal"]=!0,e)),r={id:this.props.campaign.modalId,className:t,title:this.props.campaign.content.title,clickOutToClose:!0,acceptButtonText:null,showX:!0,isPreview:this.props.isPreview||!1},i=this.props.isPreview?_:d.Modal,s=this.props.isPreview?{}:{onDismiss:this.onDismiss,onShow:this.onShow};return o.default.createElement(i,n.__assign({},r,s),this.renderImage(),this.renderSubtext(),this.renderButtons(),this.renderBottomText())},t.prototype.renderButtons=function(){return o.default.createElement(c.PromptButtons,{campaign:this.props.campaign,confirmIsPost:this.state_manager.shouldConfirmUsingPost(),confirmUrl:this.state_manager.buildConfirmEndpointURI(),onConfirm:this.onConfirm,onDismiss:this.onDismiss,onRemindMeLater:this.onRemindMeLater})},t.prototype.renderImage=function(){return this.props.campaign.content.imageUrl?o.default.createElement(l.Image,{src:this.props.campaign.content.imageUrl,srcHiRes:this.props.campaign.content.imageUrlHiRes,alt:this.props.campaign.content.confirmText||r._("Main modal image.")}):void 0},t.prototype.renderBottomText=function(){return this.props.campaign.content.bottomText?o.default.createElement("div",{className:"bottom-text",dangerouslySetInnerHTML:c.sanitizeOptionalHTML(this.props.campaign.content.bottomText),ref:this.enhanceHTMLButtons}):void 0},t.prototype.renderSubtext=function(){return o.default.createElement("div",{className:"subtext",dangerouslySetInnerHTML:c.sanitizeOptionalHTML(this.props.campaign.content.subtext),ref:this.enhanceHTMLButtons})},t.displayName="HomeModalWithoutCSS",t})(s.PromptLocationWithDefaultState);t.HomeModalWithoutCSS=b,t.HomeModalWithCSS=i.requireCssWithComponent(b,["/static/css/modal-vflKK1XSJ.css","/static/css/upsell/prompt_pagelet-vfl_uoVlu.css","/static/css/upsell/upsell_modal-vflSz0X3p.css"]);var v=(function(e){function a(r){var i=e.call(this,r)||this;if(a.shouldDisplayHomeModal(r)){var s=o.default.createElement(t.HomeModalWithCSS,n.__assign({},r,{ref:i.props.refCallback}));d.Modal.showInstance(s)}else a.kickstartOnboarding(r);return i}return n.__extends(a,e),a.prototype.render=function(){return null},a.shouldDisplayHomeModal=function(e){return!(!e||!e.campaign)&&!(e.campaign.isHomeOnboardingEnabled&&e.campaign.onboardingModuleName&&["home_v1","home_v0"].indexOf(e.campaign.onboardingModuleName)===-1)},a.kickstartOnboarding=function(e){if(!e||!e.campaign)return void m.UELoader.notifyModuleToLoad(null);e.campaign.onboardingModuleName?(m.UELoader.notifyModuleToLoad(e.campaign.onboardingModuleName),g(e.campaign.onboardingModuleName),h(e.campaign.onboardingModuleName)):m.UELoader.notifyModuleToLoad(null);var t=new p.PromptEventLogger(e);t.recordClientImpression(),t.recordConfirm(),t.recordEvent("onboarding_confirmed_no_prompt")},a})(o.default.PureComponent);t.HomeModal=v}),define("modules/clean/upsell/prompt_init",["require","exports","tslib","modules/clean/upsell/exception","modules/clean/upsell/prompt_event_emitter"],function(e,t,n,o,a){"use strict";function r(){return window.performance&&window.performance.mark&&window.performance.measure&&window.location.search.indexOf("show_debug_spans")>-1}function i(e){r()&&window.performance.mark("PromptInit start");try{var t=new s(e.prompt_loaded_status);a.promptBufferedEventEmitter.emit(a.Events.ON_PROMPT_INITIALIZED,t)}catch(t){o.reportException({err:t,tags:[o.TAGS.PROMPT_INIT],exc_extra:{param_config:e}})}}Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o);var s=(function(){function e(e){this.prompt_loaded_status=e}return e.prototype.didHeaderBubbleLoad=function(){return!!this.prompt_loaded_status.HEADER_BUBBLE},e.prototype.didHomeModalLoad=function(){return!!this.prompt_loaded_status.HOME_MODAL==!0},e.prototype.didTargetedBubbleLoad=function(){return!!this.prompt_loaded_status.TARGETED_BUBBLE==!0},e.prototype.didHeaderLinkLoad=function(){return!!this.prompt_loaded_status.HEADER_LINK==!0},e.prototype.didCampaignForUserEducationLoad=function(){return!!this.prompt_loaded_status.ONBOARDING_MODULE},e.prototype.didMainCampaignLoad=function(){return this.didHeaderBubbleLoad()||this.didTargetedBubbleLoad()||this.didHomeModalLoad()},e.prototype.didAccountHeaderCampaignLoad=function(){return this.didHeaderBubbleLoad()||this.didHeaderLinkLoad()},e.prototype.didTopNotificationLoad=function(){return!!this.prompt_loaded_status.TOP_NOTIFICATION},e.prototype.didAnyContentLoad=function(){return this.didHeaderBubbleLoad()||this.didHomeModalLoad()||this.didTargetedBubbleLoad()||this.didHeaderLinkLoad()||this.didTopNotificationLoad()},e})();t.ResponseParser=s,t.initialize_module=i});
//# sourceMappingURL=pkg-prompt.min.js-vfltBpq_c.map